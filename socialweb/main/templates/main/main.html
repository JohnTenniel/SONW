{% extends 'main/base.html' %}
{% load static %}
{% block content %}

<!--<main class="tm-container masonry">-->
<!--        <div class="item tm-bg-white tm-block tm-block-left">-->
<!--            <p class="tm-hero-text">&ldquo;Любая рандоманая цитата или что угодно что хочет написать пользователь / фотографии брать на рандоме из базы данных&rdquo;</p>-->
<!--            <header class="tm-block-brand">-->
<!--                <div class="tm-bg-primary-dark tm-text-white tm-block-brand-inner">-->
<!--                    <i class="fas fa-braille fa-3x"></i>-->
<!--                    <h1 class="tm-brand-name">{{ user  }}</h1>-->
<!--                </div>-->
<!--            </header>-->
<!--        </div>-->
<!--        <div class="item">-->
<!--            <img src="{% static 'images/image_5.jpg' %}" alt="Image" class="tm-img-left">-->
<!--        </div>-->
<!--        <div class="item tm-bg-secondary tm-text-white tm-block tm-block-wider tm-block-pad tm-block-left-2">-->
<!--            <i class="fas fa-award fa-4x tm-block-icon"></i>-->
<!--            <p>Текст для заполнения</p>-->
<!--            <div class="tm-text-right">-->
<!--                <a href="#" class="tm-btn tm-btn-small tm-btn-primary tm-mt">Read More</a>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div class="item">-->
<!--            <img src="{% static 'images/image_4.jpg' %}" alt="Image" class="tm-img-left">-->
<!--        </div>-->

<!--        <div class="item tm-bg-secondary tm-text-white tm-block tm-block-wider  ">-->
<!--            <img src="{% static 'images/image_12.jpg' %}" alt="Image" class="tm-img-left">-->
<!--        </div>-->


<!--        <div class="item">-->
<!--            <img src="{% static 'images/image_1.jpg' %}" alt="Image">-->
<!--        </div>-->
<!--        <div class="item tm-block-right">-->
<!--            <div class="tm-block-right-inner tm-bg-primary-light tm-text-white tm-block tm-block-wider tm-block-pad">-->
<!--                <header>-->
<!--                    <h2 class="tm-text-uppercase">-->
<!--                        Заголовок-->
<!--                    </h2>-->
<!--                </header>-->
<!--                <p>И тут текст-->
<!--                    <a href="">Ссылка</a> еще 1 текст</p>-->

<!--            </div>-->
<!--        </div>-->

<!--        <div class="item" data-desktop-seq-no="8" data-mobile-seq-no="6">-->
<!--            <img src="{% static 'images/image_2.jpg' %}" alt="Image">-->
<!--        </div>-->

<!--        <div class="item tm-bg-white tm-block tm-form-section" data-desktop-seq-no="9" data-mobile-seq-no="7">-->
<!--            <div class="tm-form-container tm-block-pad tm-pb-0">-->
<!--                <header>-->

<!--                    <h2 class="tm-text-uppercase tm-text-gray-light tm-mb">-->
<!--                        Список друзей-->
<!--                    </h2>-->

<!--                    <h2 class="tm-text-uppercase tm-text-gray-light tm-mb">-->
<!--                        Подписчики-->
<!--                    </h2>-->

<!--                    <h2 class="tm-text-uppercase tm-text-gray-light tm-mb">-->
<!--                        Рекомендации-->
<!--                    </h2>-->

<!--                </header>-->

<!--            </div>-->

<!--            <div class="tm-form-section-tag">-->
<!--                <div class="tm-bg-secondary tm-text-white tm-block-pad tm-form-section-tag-inner">-->
<!--                    <header>-->
<!--                        <h2>Добавь друзей</h2>-->
<!--                        <a style="color = red" href="{% url 'login' %}"></a>-->
<!--                    </header>-->
<!--                    <p>Просто начни общение</p>-->
<!--                </div>-->
<!--            </div>-->
<!--        <div class="item">-->
<!--            <img src="{% static 'images/image_11.jpg' %}" alt="Image" class="tm-img-left">-->
<!--        </div>-->
<!--        </div>-->

<!--    </main>-->
<div class="main">
    <div class="search-bar">
        <input type="text" placeholder="Search"/>
        <button class="right-side-button" @click="rightSide = !rightSide">
            <svg
                    viewBox="0 0 24 24"
                    width="24"
                    height="24"
                    stroke="currentColor"
                    stroke-width="2"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="css-i6dzq1"
            >
                <path
                        d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
                ></path>
            </svg>
        </button>
    </div>
    <div class="main-container">
        <div class="timeline">
            <!-- из за этого модуля долго думает при переходе между страницами-->
            <div class="timeline-right">
                {% for el in changemain %}
                {% if el.image %}
                <div class="album box">
                    <div class="status-main">
                        <img src="{%for pr in profuser%}
                                        {% if el.autor_id == pr.user_id %}
                                            {{ pr.avatar.url }}
                                        {% endif %}
                                     {% endfor %}"
                             class="status-img"/>
                        <div class="album-detail">
                            <div class="album-title"><strong>{{ el.autor }}</strong> create new <span>post</span></div>
                            <div class="album-date">{{ el.created }}</div>
                        </div>
                        <button class="intro-menu"></button>
                    </div>
                    <div class="album-content">
                        {% if el.description %}
                        <a href="{% url 'hole-image' el.pk %}">{{ el.title }}</a>
                        {% else %}
                        {{ el.title }}
                        {% endif %}
                        <div class="album-photos">
                            <img
                                    src="{{el.image.url}}"
                                    alt=""
                                    class="album-photo"
                            />
                        </div>
                    <h4>{{el.description}}</h4>
                    </div>
                    <div class="album-actions">
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" viewBox="0 0 24 24">
                                <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                            </svg>
                            +
                        </a>
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                            </svg>
                            +
                        </a>
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                                <path d="M17 1l4 4-4 4"/>
                                <path d="M3 11V9a4 4 0 014-4h14M7 23l-4-4 4-4"/>
                                <path d="M21 13v2a4 4 0 01-4 4H3"/>
                            </svg>
                            +
                        </a>
                    </div>
                </div>
                {% elif el.video %}
                <div class="album box">
                    <div class="status-main">
                        <img src="{%for pr in profuser%}
                                        {% if el.autor_id == pr.user_id %}
                                            {{ pr.avatar.url }}
                                        {% endif %}
                                     {% endfor %}"
                             class="status-img"/>
                        <div class="album-detail">
                            <div class="album-title"><strong>{{ el.autor }}</strong> create new <span>post</span></div>
                            <div class="album-date">{{ el.created }}</div>
                        </div>
                        <button class="intro-menu"></button>
                    </div>
                    <div class="album-content">
                        {% if el.content %}
                        <a href="{% url 'Article' el.pk %}">{{ el.title }}</a>
                        {% else %}
                        {{ el.title }}
                        {% endif %}
                        <div class="album-photos">
                            <video
                                    src="{{ el.video.url }}"
                                    class="album-photo"
                                    controls
                            ></video>
                        </div>
                    <h4>{{el.description}}</h4>
                    </div>
                    <div class="album-actions">
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" viewBox="0 0 24 24">
                                <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                            </svg>
                            +
                        </a>
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                            </svg>
                            +
                        </a>
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                                <path d="M17 1l4 4-4 4"/>
                                <path d="M3 11V9a4 4 0 014-4h14M7 23l-4-4 4-4"/>
                                <path d="M21 13v2a4 4 0 01-4 4H3"/>
                            </svg>
                            +
                        </a>
                    </div>
                </div>
                {% else %}
                <div class="album box">
                    <div class="status-main">
                        <img src="{%for pr in profuser%}
                                        {% if el.autor_id == pr.user_id %}
                                            {{ pr.avatar.url }}
                                        {% endif %}
                                     {% endfor %}"
                             class="status-img"/>
                        <div class="album-detail">
                            <div class="album-title"><strong>{{ el.autor }}</strong> create new <span>post</span></div>
                            <div class="album-date">{{ el.created }}</div>
                        </div>
                        <button class="intro-menu"></button>
                    </div>
                    <div class="album-content">
                        {% if el.content %}
                        <a href="{% url 'Article' el.pk %}">{{ el.title }}</a>
                        {% else %}
                        {{ el.title }}
                        {% endif %}
                        <div class="album-photos">
                            <img src="{{el.photo.url}}"
                                 alt="" class="album-photo"/>
                        </div>
                    <h4>{{el.content}}</h4>
                    </div>
                    <div class="album-actions">
                        {% if user.is_authenticated and user != blogpost.author %}
                            <a hx-get="{% url 'like-post' el.id %}"
                               hx-target="#like-{{ el.id }}"
                               hx-swap="innerHTML"
                               class="album-action">
                                <svg
                                    stroke="currentColor"
                                    stroke-width="2"
                                    fill="none"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="css-i6dzq1"
                                    viewBox="0 0 24 24"
                            >
                                    {% if user in el.likes.all %}
                                    <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                                    {% else %}
                                    <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>
                                    {% endif %}
                            </svg>
                                <div id="like-{{ el.id }}">{{ el.likes.count }}</div>

                            </a>
                        {% endif %}
                        <a href="{% url 'Article' el.pk %}" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                                <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/>
                            </svg>
                            {% if el.comments.count %}
                                {{ el.comments.count }}
                                {% else %}
                                add comment
                                {% endif %}
                        </a>
                        <a href="#" class="album-action">
                            <svg stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"
                                 stroke-linejoin="round" class="css-i6dzq1" viewBox="0 0 24 24">
                                <path d="M17 1l4 4-4 4"/>
                                <path d="M3 11V9a4 4 0 014-4h14M7 23l-4-4 4-4"/>
                                <path d="M21 13v2a4 4 0 01-4 4H3"/>
                            </svg>
                            +
                        </a>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}