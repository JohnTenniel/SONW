{% extends 'main/base.html' %}
{% load static %}
{% block content %}
<script src="{% static 'js/puw.js' %}"></script>

<div class="container" x-data="{ rightSide: false, leftSide: false }">
    <div class="main">
        <div class="main-container">
            <div class="profile">
                <!--avatar-->
                <div class="profile-avatar">
                    <img
                            src="{{ profile.avatar.url }}"
                            alt=""
                            class="profile-img"
                    />
                    <div class="profile-name">{{ profile.first_name }}</div>
                </div>
                <!--background-->
                <img
                        src="{{ profile.bg_PIC.url }}"
                        alt=""
                        class="profile-cover"
                />
            </div>
            <div class="timeline">
                <div class="timeline-left">
                    <!--user info-->
                    <div class="intro box">
                        <div class="intro-title">
                            Introduction
                        </div>
                        <div class="info">
                            <div class="info-item">
                                Last login at <a href="#">{{ profile.user.last_login }}</a>
                            </div>
                            <div class="info-item">
                                Profession <a href="#">{{ profile.proffecy }}</a>
                            </div>
                            <div class="info-item">
                                Live in <a href="#">{{ profile.location }}</a>
                            </div>
                            <div class="info-item">
                                Real name <a href="#">{{ profile.first_name }} {{ profile.last_name }}</a>
                            </div>
                        </div>
                    </div>
                    <!--friends box-->
                    <div class="pages box">

                        <div class="intro-title">
                            Your friends
                            Count: {{ profile.get_friends_no }}
                        </div>
                        {% for friends in profile.friends.all %}

                        <div class="user">

                            <img
                                    src="{%for pr in profuser %}{% if pr.user_id == friends.id %}{{ pr.avatar.url }}{% endif %}{% endfor %}"
                                    alt=""
                                    class="user-img"
                            />
                            {%for pr in profuser %}{% if pr.user_id == friends.id %}
                            <div class="username">{{ pr.first_name }} {{ pr.last_name }}</div>
                            {% endif %}{% endfor %}
                        </div>


                        {% endfor %}
                    </div>
                </div>
                <div class="timeline-right">
                    <!--xz-->
                    <div class="status box">
                        <form action="{% url 'status-edit' user.pk%}" method="POST" enctype="multipart/form-data">
                            <div class="status-menu">
                                <a class="status-menu-item active" href="#"
                                >Status</a
                                >
                            </div>
                            <div class="status-main">
                                <img
                                        src="{{ profile.avatar.url }}"
                                        class="status-img"
                                />
                                {% csrf_token %}
                                {{ form.as_p }}
                                <textarea
                                        type="text"
                                        name="status"
                                        maxlength="250"
                                        id="id_status"
                                        class="status-textarea"
                                        placeholder="{{ profile.status }}"
                                ></textarea>
                            </div>
                            {% if user.is_authenticated and user.id == profile.user_id %}
                            <div class="status-actions">
                                <button class="status-share" type="submit">Share</button>
                            </div>
                            {% endif %}
                        </form>
                    </div>
                    <!--add all-->
                    {% if user.is_authenticated and user.id == profile.user_id %}
                    <div class="album box">
                        <div class="status-menu">
                            <a data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                               class="active status-menu-item" aria-current="true" aria-label="Slide 1" href="#"
                            >Add Image</a
                            >
                            <a type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                               aria-label="Slide 2" href="#" class="status-menu-item">Add Video</a>
                            <a type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                               aria-label="Slide 3" href="#" class="status-menu-item">Add Post</a>
                        </div>
                        <hr>
                        <div class="status-main">
                            <div id="carouselExampleIndicators" class="carousel slide">

                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <div class="status-menu">
                                            <h1>Add image</h1>
                                            <hr>
                                            <form action="{% url 'addimage' %}" method="post"
                                                  enctype="multipart/form-data">
                                                {% csrf_token %}
                                                <div class="form-error">{{ form.non_field_errors }}</div>
                                                <input type="text" name="title" maxlength="200" required=""
                                                       aria-invalid="true" id="id_title">: title
                                                <textarea name="description" cols="40" rows="10"
                                                          id="id_description"></textarea>: description
                                                <p>
                                                    <label for="id_image">Image:</label>
                                                    <input type="file" name="image" accept="image/*" id="id_image">
                                                </p>

                                                <button>Добавить</button>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="status-menu">
                                            <h1>Add videos</h1>
                                            <hr>
                                            <form action="{% url 'addvideo' %}" method="post"
                                                  enctype="multipart/form-data">
                                                {% csrf_token %}
                                                <div class="form-error">{{ form.non_field_errors }}</div>
                                                <input type="text" name="title" maxlength="200" required=""
                                                       id="id_title">: title
                                                <textarea name="description" cols="40" rows="10"
                                                          id="id_description"></textarea>: description
                                                <p>
                                                    <label for="id_video">Video:</label>
                                                    <input type="file" name="video" id="id_video">
                                                </p>
                                                <button>Добавить</button>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="carousel-item">
                                        <div class="status-menu">
                                            <h1>Add post</h1>
                                            <hr>
                                            <form action="{% url 'addpost' %}" method="post"
                                                  enctype="multipart/form-data">
                                                {% csrf_token %}
                                                <div class="form-error">{{ form.non_field_errors }}</div>
                                                <input type="text" name="title" maxlength="255" required=""
                                                       id="id_title">: title
                                                <textarea name="content" cols="40" rows="10" id="id_content"></textarea>:
                                                description
                                                <p>
                                                    <label for="id_photo">Фото:</label>
                                                    <input type="file" name="photo" accept="image/*" id="id_photo">
                                                </p>
                                                <button>Добавить</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>

</div>
{% endblock %}